FIRRTL version 1.2.0
circuit RegularConvFullKTile :
  module PEFixed : @[src/main/scala/conv/PEFixed.scala 11:7]
    input clock : Clock @[src/main/scala/conv/PEFixed.scala 11:7]
    input reset : UInt<1> @[src/main/scala/conv/PEFixed.scala 11:7]
    input io_a_in : SInt<8> @[src/main/scala/conv/PEFixed.scala 12:14]
    input io_b_in : SInt<8> @[src/main/scala/conv/PEFixed.scala 12:14]
    input io_psum_in : SInt<32> @[src/main/scala/conv/PEFixed.scala 12:14]
    output io_a_out : SInt<8> @[src/main/scala/conv/PEFixed.scala 12:14]
    output io_b_out : SInt<8> @[src/main/scala/conv/PEFixed.scala 12:14]
    output io_psum_out : SInt<32> @[src/main/scala/conv/PEFixed.scala 12:14]

    node prod = mul(io_a_in, io_b_in) @[src/main/scala/conv/PEFixed.scala 27:30]
    node scaled = shr(prod, 0) @[src/main/scala/conv/PEFixed.scala 39:25]
    node scaledAcc = pad(scaled, 32) @[src/main/scala/conv/PEFixed.scala 42:23 43:13]
    node _io_psum_out_T = add(io_psum_in, scaledAcc) @[src/main/scala/conv/PEFixed.scala 46:29]
    node _io_psum_out_T_1 = tail(_io_psum_out_T, 1) @[src/main/scala/conv/PEFixed.scala 46:29]
    node _io_psum_out_T_2 = asSInt(_io_psum_out_T_1) @[src/main/scala/conv/PEFixed.scala 46:29]
    io_a_out <= io_a_in @[src/main/scala/conv/PEFixed.scala 23:12]
    io_b_out <= io_b_in @[src/main/scala/conv/PEFixed.scala 24:12]
    io_psum_out <= _io_psum_out_T_2 @[src/main/scala/conv/PEFixed.scala 46:15]

  module SystolicArrayMatVecFixed : @[src/main/scala/conv/SystolicArrayMatVecFixed.scala 9:7]
    input clock : Clock @[src/main/scala/conv/SystolicArrayMatVecFixed.scala 9:7]
    input reset : UInt<1> @[src/main/scala/conv/SystolicArrayMatVecFixed.scala 9:7]
    input io_a_in_0_0 : SInt<8> @[src/main/scala/conv/SystolicArrayMatVecFixed.scala 10:14]
    input io_a_in_0_1 : SInt<8> @[src/main/scala/conv/SystolicArrayMatVecFixed.scala 10:14]
    input io_b_in_0 : SInt<8> @[src/main/scala/conv/SystolicArrayMatVecFixed.scala 10:14]
    input io_b_in_1 : SInt<8> @[src/main/scala/conv/SystolicArrayMatVecFixed.scala 10:14]
    input io_psum_in_0 : SInt<32> @[src/main/scala/conv/SystolicArrayMatVecFixed.scala 10:14]
    output io_psum_out_0 : SInt<32> @[src/main/scala/conv/SystolicArrayMatVecFixed.scala 10:14]

    inst pe of PEFixed @[src/main/scala/conv/SystolicArrayMatVecFixed.scala 24:22]
    inst pe_1 of PEFixed @[src/main/scala/conv/SystolicArrayMatVecFixed.scala 24:22]
    node pWire_0_0 = io_psum_in_0 @[src/main/scala/conv/SystolicArrayMatVecFixed.scala 17:19 19:17]
    node pWire_0_1 = pe.io_psum_out @[src/main/scala/conv/SystolicArrayMatVecFixed.scala 17:19 28:23]
    node pWire_0_2 = pe_1.io_psum_out @[src/main/scala/conv/SystolicArrayMatVecFixed.scala 17:19 28:23]
    io_psum_out_0 <= pWire_0_2 @[src/main/scala/conv/SystolicArrayMatVecFixed.scala 30:20]
    pe.clock <= clock
    pe.reset <= reset
    pe.io_a_in <= io_a_in_0_0 @[src/main/scala/conv/SystolicArrayMatVecFixed.scala 25:21]
    pe.io_b_in <= io_b_in_0 @[src/main/scala/conv/SystolicArrayMatVecFixed.scala 26:21]
    pe.io_psum_in <= pWire_0_0 @[src/main/scala/conv/SystolicArrayMatVecFixed.scala 27:21]
    pe_1.clock <= clock
    pe_1.reset <= reset
    pe_1.io_a_in <= io_a_in_0_1 @[src/main/scala/conv/SystolicArrayMatVecFixed.scala 25:21]
    pe_1.io_b_in <= io_b_in_1 @[src/main/scala/conv/SystolicArrayMatVecFixed.scala 26:21]
    pe_1.io_psum_in <= pWire_0_1 @[src/main/scala/conv/SystolicArrayMatVecFixed.scala 27:21]

  module RegularConvFull_SA_KTile : @[src/main/scala/conv/RegularConvFull_SA_KTile.scala 11:7]
    input clock : Clock @[src/main/scala/conv/RegularConvFull_SA_KTile.scala 11:7]
    input reset : UInt<1> @[src/main/scala/conv/RegularConvFull_SA_KTile.scala 11:7]
    input io_start : UInt<1> @[src/main/scala/conv/RegularConvFull_SA_KTile.scala 19:14]
    input io_x_tile_0 : SInt<8> @[src/main/scala/conv/RegularConvFull_SA_KTile.scala 19:14]
    input io_x_tile_1 : SInt<8> @[src/main/scala/conv/RegularConvFull_SA_KTile.scala 19:14]
    input io_w_tile_0_0 : SInt<8> @[src/main/scala/conv/RegularConvFull_SA_KTile.scala 19:14]
    input io_w_tile_0_1 : SInt<8> @[src/main/scala/conv/RegularConvFull_SA_KTile.scala 19:14]
    input io_psum_in_0 : SInt<32> @[src/main/scala/conv/RegularConvFull_SA_KTile.scala 19:14]
    output io_psum_out_0 : SInt<32> @[src/main/scala/conv/RegularConvFull_SA_KTile.scala 19:14]
    output io_done : UInt<1> @[src/main/scala/conv/RegularConvFull_SA_KTile.scala 19:14]

    inst sa of SystolicArrayMatVecFixed @[src/main/scala/conv/RegularConvFull_SA_KTile.scala 34:18]
    reg doneReg : UInt<1>, clock with :
      reset => (UInt<1>("h0"), doneReg) @[src/main/scala/conv/RegularConvFull_SA_KTile.scala 46:24]
    node _GEN_0 = mux(io_start, UInt<1>("h1"), UInt<1>("h0")) @[src/main/scala/conv/RegularConvFull_SA_KTile.scala 49:18 50:13 52:13]
    io_psum_out_0 <= sa.io_psum_out_0 @[src/main/scala/conv/RegularConvFull_SA_KTile.scala 56:20]
    io_done <= doneReg @[src/main/scala/conv/RegularConvFull_SA_KTile.scala 47:11]
    sa.clock <= clock
    sa.reset <= reset
    sa.io_a_in_0_0 <= io_w_tile_0_0 @[src/main/scala/conv/RegularConvFull_SA_KTile.scala 37:24]
    sa.io_a_in_0_1 <= io_w_tile_0_1 @[src/main/scala/conv/RegularConvFull_SA_KTile.scala 37:24]
    sa.io_b_in_0 <= io_x_tile_0 @[src/main/scala/conv/RegularConvFull_SA_KTile.scala 42:19]
    sa.io_b_in_1 <= io_x_tile_1 @[src/main/scala/conv/RegularConvFull_SA_KTile.scala 42:19]
    sa.io_psum_in_0 <= io_psum_in_0 @[src/main/scala/conv/RegularConvFull_SA_KTile.scala 39:22]
    doneReg <= mux(reset, UInt<1>("h0"), _GEN_0) @[src/main/scala/conv/RegularConvFull_SA_KTile.scala 46:{24,24}]

  module RegularConvFullKTile : @[src/main/scala/conv/RegularConvFullKTile.scala 13:7]
    input clock : Clock @[src/main/scala/conv/RegularConvFullKTile.scala 13:7]
    input reset : UInt<1> @[src/main/scala/conv/RegularConvFullKTile.scala 13:7]
    input io_start : UInt<1> @[src/main/scala/conv/RegularConvFullKTile.scala 14:14]
    input io_x_tiles_0_0 : SInt<8> @[src/main/scala/conv/RegularConvFullKTile.scala 14:14]
    input io_x_tiles_0_1 : SInt<8> @[src/main/scala/conv/RegularConvFullKTile.scala 14:14]
    input io_x_tiles_1_0 : SInt<8> @[src/main/scala/conv/RegularConvFullKTile.scala 14:14]
    input io_x_tiles_1_1 : SInt<8> @[src/main/scala/conv/RegularConvFullKTile.scala 14:14]
    input io_x_tiles_2_0 : SInt<8> @[src/main/scala/conv/RegularConvFullKTile.scala 14:14]
    input io_x_tiles_2_1 : SInt<8> @[src/main/scala/conv/RegularConvFullKTile.scala 14:14]
    input io_w_tiles_0_0_0 : SInt<8> @[src/main/scala/conv/RegularConvFullKTile.scala 14:14]
    input io_w_tiles_0_0_1 : SInt<8> @[src/main/scala/conv/RegularConvFullKTile.scala 14:14]
    input io_w_tiles_1_0_0 : SInt<8> @[src/main/scala/conv/RegularConvFullKTile.scala 14:14]
    input io_w_tiles_1_0_1 : SInt<8> @[src/main/scala/conv/RegularConvFullKTile.scala 14:14]
    input io_w_tiles_2_0_0 : SInt<8> @[src/main/scala/conv/RegularConvFullKTile.scala 14:14]
    input io_w_tiles_2_0_1 : SInt<8> @[src/main/scala/conv/RegularConvFullKTile.scala 14:14]
    output io_out_0 : SInt<32> @[src/main/scala/conv/RegularConvFullKTile.scala 14:14]
    output io_done : UInt<1> @[src/main/scala/conv/RegularConvFullKTile.scala 14:14]

    inst core of RegularConvFull_SA_KTile @[src/main/scala/conv/RegularConvFullKTile.scala 25:20]
    reg psum_0 : SInt<32>, clock with :
      reset => (UInt<1>("h0"), psum_0) @[src/main/scala/conv/RegularConvFullKTile.scala 32:21]
    reg tileIdx : UInt<2>, clock with :
      reset => (UInt<1>("h0"), tileIdx) @[src/main/scala/conv/RegularConvFullKTile.scala 35:24]
    reg state : UInt<2>, clock with :
      reset => (UInt<1>("h0"), state) @[src/main/scala/conv/RegularConvFullKTile.scala 37:22]
    node _GEN_0 = validif(eq(UInt<1>("h0"), tileIdx), io_x_tiles_0_0) @[src/main/scala/conv/RegularConvFullKTile.scala 41:{18,18}]
    node _GEN_1 = mux(eq(UInt<1>("h1"), tileIdx), io_x_tiles_1_0, _GEN_0) @[src/main/scala/conv/RegularConvFullKTile.scala 41:{18,18}]
    node _GEN_2 = mux(eq(UInt<2>("h2"), tileIdx), io_x_tiles_2_0, _GEN_1) @[src/main/scala/conv/RegularConvFullKTile.scala 41:{18,18}]
    node _GEN_3 = validif(eq(UInt<1>("h0"), tileIdx), io_x_tiles_0_1) @[src/main/scala/conv/RegularConvFullKTile.scala 41:{18,18}]
    node _GEN_4 = mux(eq(UInt<1>("h1"), tileIdx), io_x_tiles_1_1, _GEN_3) @[src/main/scala/conv/RegularConvFullKTile.scala 41:{18,18}]
    node _GEN_5 = mux(eq(UInt<2>("h2"), tileIdx), io_x_tiles_2_1, _GEN_4) @[src/main/scala/conv/RegularConvFullKTile.scala 41:{18,18}]
    node _GEN_6 = validif(eq(UInt<1>("h0"), tileIdx), io_w_tiles_0_0_0) @[src/main/scala/conv/RegularConvFullKTile.scala 42:{18,18}]
    node _GEN_7 = mux(eq(UInt<1>("h1"), tileIdx), io_w_tiles_1_0_0, _GEN_6) @[src/main/scala/conv/RegularConvFullKTile.scala 42:{18,18}]
    node _GEN_8 = mux(eq(UInt<2>("h2"), tileIdx), io_w_tiles_2_0_0, _GEN_7) @[src/main/scala/conv/RegularConvFullKTile.scala 42:{18,18}]
    node _GEN_9 = validif(eq(UInt<1>("h0"), tileIdx), io_w_tiles_0_0_1) @[src/main/scala/conv/RegularConvFullKTile.scala 42:{18,18}]
    node _GEN_10 = mux(eq(UInt<1>("h1"), tileIdx), io_w_tiles_1_0_1, _GEN_9) @[src/main/scala/conv/RegularConvFullKTile.scala 42:{18,18}]
    node _GEN_11 = mux(eq(UInt<2>("h2"), tileIdx), io_w_tiles_2_0_1, _GEN_10) @[src/main/scala/conv/RegularConvFullKTile.scala 42:{18,18}]
    node _io_done_T = eq(state, UInt<2>("h3")) @[src/main/scala/conv/RegularConvFullKTile.scala 45:21]
    node _T = eq(UInt<2>("h0"), state) @[src/main/scala/conv/RegularConvFullKTile.scala 47:17]
    node _GEN_12 = mux(io_start, asSInt(UInt<1>("h0")), psum_0) @[src/main/scala/conv/RegularConvFullKTile.scala 32:21 49:22 50:45]
    node _GEN_13 = mux(io_start, UInt<1>("h0"), tileIdx) @[src/main/scala/conv/RegularConvFullKTile.scala 49:22 51:17 35:24]
    node _GEN_14 = mux(io_start, UInt<2>("h1"), state) @[src/main/scala/conv/RegularConvFullKTile.scala 49:22 52:15 37:22]
    node _T_1 = eq(UInt<2>("h1"), state) @[src/main/scala/conv/RegularConvFullKTile.scala 47:17]
    node _GEN_15 = mux(core.io_done, UInt<2>("h2"), state) @[src/main/scala/conv/RegularConvFullKTile.scala 58:26 59:15 37:22]
    node _T_2 = eq(UInt<2>("h2"), state) @[src/main/scala/conv/RegularConvFullKTile.scala 47:17]
    node _T_3 = eq(tileIdx, UInt<2>("h2")) @[src/main/scala/conv/RegularConvFullKTile.scala 67:20]
    node _tileIdx_T = add(tileIdx, UInt<1>("h1")) @[src/main/scala/conv/RegularConvFullKTile.scala 70:28]
    node _tileIdx_T_1 = tail(_tileIdx_T, 1) @[src/main/scala/conv/RegularConvFullKTile.scala 70:28]
    node _GEN_16 = mux(_T_3, UInt<2>("h3"), UInt<2>("h1")) @[src/main/scala/conv/RegularConvFullKTile.scala 67:43 68:15 71:15]
    node _GEN_17 = mux(_T_3, tileIdx, _tileIdx_T_1) @[src/main/scala/conv/RegularConvFullKTile.scala 35:24 67:43 70:17]
    node _T_4 = eq(UInt<2>("h3"), state) @[src/main/scala/conv/RegularConvFullKTile.scala 47:17]
    node _T_5 = eq(io_start, UInt<1>("h0")) @[src/main/scala/conv/RegularConvFullKTile.scala 76:12]
    node _GEN_18 = mux(_T_5, UInt<2>("h0"), state) @[src/main/scala/conv/RegularConvFullKTile.scala 37:22 76:{23,31}]
    node _GEN_19 = mux(_T_4, _GEN_18, state) @[src/main/scala/conv/RegularConvFullKTile.scala 47:17 37:22]
    node _GEN_20 = mux(_T_2, core.io_psum_out_0, psum_0) @[src/main/scala/conv/RegularConvFullKTile.scala 47:17 65:17 32:21]
    node _GEN_21 = mux(_T_2, _GEN_16, _GEN_19) @[src/main/scala/conv/RegularConvFullKTile.scala 47:17]
    node _GEN_22 = mux(_T_2, _GEN_17, tileIdx) @[src/main/scala/conv/RegularConvFullKTile.scala 47:17 35:24]
    node _GEN_23 = mux(_T_1, UInt<1>("h1"), UInt<1>("h0")) @[src/main/scala/conv/RegularConvFullKTile.scala 40:17 47:17 57:21]
    node _GEN_24 = mux(_T_1, _GEN_15, _GEN_21) @[src/main/scala/conv/RegularConvFullKTile.scala 47:17]
    node _GEN_25 = mux(_T_1, psum_0, _GEN_20) @[src/main/scala/conv/RegularConvFullKTile.scala 47:17 32:21]
    node _GEN_26 = mux(_T_1, tileIdx, _GEN_22) @[src/main/scala/conv/RegularConvFullKTile.scala 47:17 35:24]
    node _GEN_27 = mux(_T, _GEN_12, _GEN_25) @[src/main/scala/conv/RegularConvFullKTile.scala 47:17]
    node _GEN_28 = mux(_T, _GEN_13, _GEN_26) @[src/main/scala/conv/RegularConvFullKTile.scala 47:17]
    node _GEN_29 = mux(_T, _GEN_14, _GEN_24) @[src/main/scala/conv/RegularConvFullKTile.scala 47:17]
    node _GEN_30 = mux(_T, UInt<1>("h0"), _GEN_23) @[src/main/scala/conv/RegularConvFullKTile.scala 40:17 47:17]
    node _psum_WIRE_0 = asSInt(UInt<32>("h0")) @[src/main/scala/conv/RegularConvFullKTile.scala 32:{29,29}]
    node _io_x_tiles_tileIdx_0 = _GEN_2 @[src/main/scala/conv/RegularConvFullKTile.scala 41:18]
    node _io_x_tiles_tileIdx_1 = _GEN_5 @[src/main/scala/conv/RegularConvFullKTile.scala 41:18]
    node _io_w_tiles_tileIdx_0_0 = _GEN_8 @[src/main/scala/conv/RegularConvFullKTile.scala 42:18]
    node _io_w_tiles_tileIdx_0_1 = _GEN_11 @[src/main/scala/conv/RegularConvFullKTile.scala 42:18]
    io_out_0 <= psum_0 @[src/main/scala/conv/RegularConvFullKTile.scala 33:10]
    io_done <= _io_done_T @[src/main/scala/conv/RegularConvFullKTile.scala 45:11]
    core.clock <= clock
    core.reset <= reset
    core.io_start <= _GEN_30
    core.io_x_tile_0 <= _io_x_tiles_tileIdx_0 @[src/main/scala/conv/RegularConvFullKTile.scala 41:18]
    core.io_x_tile_1 <= _io_x_tiles_tileIdx_1 @[src/main/scala/conv/RegularConvFullKTile.scala 41:18]
    core.io_w_tile_0_0 <= _io_w_tiles_tileIdx_0_0 @[src/main/scala/conv/RegularConvFullKTile.scala 42:18]
    core.io_w_tile_0_1 <= _io_w_tiles_tileIdx_0_1 @[src/main/scala/conv/RegularConvFullKTile.scala 42:18]
    core.io_psum_in_0 <= psum_0 @[src/main/scala/conv/RegularConvFullKTile.scala 43:19]
    psum_0 <= mux(reset, _psum_WIRE_0, _GEN_27) @[src/main/scala/conv/RegularConvFullKTile.scala 32:{21,21}]
    tileIdx <= mux(reset, UInt<2>("h0"), _GEN_28) @[src/main/scala/conv/RegularConvFullKTile.scala 35:{24,24}]
    state <= mux(reset, UInt<2>("h0"), _GEN_29) @[src/main/scala/conv/RegularConvFullKTile.scala 37:{22,22}]
